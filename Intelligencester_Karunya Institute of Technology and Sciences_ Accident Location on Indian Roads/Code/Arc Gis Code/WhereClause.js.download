// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/2023.1/esri/copyright.txt for details.//>>built
require({cache:{"esri/core/sql/AggregateFunctions":function(){define(["exports"],function(t){function E(A){let K=0;for(let I=0;I<A.length;I++)K+=A[I];return K/A.length}function R(A){const K=E(A),I=A.length;let h=0;for(const k of A)h+=(k-K)**2;return 1<I?h/(I-1):0}const U={min:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:Math.min.apply(Math,A[0])},max:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:Math.max.apply(Math,A[0])},avg:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:E(A[0])},
sum:{minParams:1,maxParams:1,evaluate:A=>{if(null==A[0])A=null;else{A=A[0];let K=0;for(let I=0;I<A.length;I++)K+=A[I];A=K}return A}},stddev:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:Math.sqrt(R(A[0]))},count:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:A[0].length},var:{minParams:1,maxParams:1,evaluate:A=>null==A[0]?null:R(A[0])}};t.aggregateFunction=function(A,K){const I=U[A.toLowerCase()];if(null==I)throw Error("Function Not Recognised");if(K.length<I.minParams||K.length>I.maxParams)throw Error(`Invalid Parameter count for call to ${A.toUpperCase()}`);
return I.evaluate(K)};t.isAggregate=function(A,K){A=U[A.toLowerCase()];return null!=A&&K>=A.minParams&&K<=A.maxParams};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/StandardizedFunctions":function(){define(["exports","../../arcade/featureset/support/errorsupport","../string","../../chunks/datetime"],function(t,E,R,U){function A(k){k=new Date(k.getTime());k.setHours(0,0,0,0);return k}function K(k,g){if(k instanceof Date)return g?A(k):k;if("string"===typeof k||k instanceof
String)if(k=U.DateTime.fromSQL(k),k.isValid)return g?A(k.toJSDate()):k.toJSDate();throw new E.SqlError(E.SqlErrorCodes.CannotCastValue);}let I=function(){function k(){this.op="+";this.millis=this.minute=this.year=this.month=this.hour=this.second=this.day=0}k._fixDefaults=function(g){if(null!==g.precision||null!==g.secondary)throw Error("Primary and Secondary SqlInterval qualifiers not supported");};k._parseSecondsComponent=function(g,x){x.includes(".")?(x=x.split("."),g.second=parseFloat(x[0]),g.millis=
parseInt(x[1],10)):g.second=parseFloat(x)};k.createFromMilliseconds=function(g){const x=new k;x.second=g/1E3;return x};k.createFromValueAndQualifer=function(g,x,N){let v=null;const q=new k;q.op="-"===N?"-":"+";if("interval-period"===x.type){k._fixDefaults(x);N=RegExp("^[0-9]{1,}$");if("year"===x.period||"month"===x.period)throw Error("Year-Month Intervals not supported");if("second"===x.period)if(/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(g))k._parseSecondsComponent(q,g);else throw Error("Illegal Interval");
else if(N.test(g))q[x.period]=parseFloat(g);else throw Error("Illegal Interval");}else{k._fixDefaults(x.start);k._fixDefaults(x.end);if("year"===x.start.period||"month"===x.start.period)throw Error("Year-Month Intervals not supported");if("year"===x.end.period||"month"===x.end.period)throw Error("Year-Month Intervals not supported");switch(x.start.period){case "day":switch(x.end.period){case "hour":v=RegExp("^[0-9]{1,} [0-9]{1,}$");if(v.test(g))q[x.start.period]=parseFloat(g.split(" ")[0]),q[x.end.period]=
parseFloat(g.split(" ")[1]);else throw Error("Illegal Interval");break;case "minute":v=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$");if(v.test(g))q[x.start.period]=parseFloat(g.split(" ")[0]),g=g.split(" ")[1].split(":"),q.hour=parseFloat(g[0]),q.minute=parseFloat(g[1]);else throw Error("Illegal Interval");break;case "second":v=RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(v.test(g))q[x.start.period]=parseFloat(g.split(" ")[0]),g=g.split(" ")[1].split(":"),q.hour=parseFloat(g[0]),
q.minute=parseFloat(g[1]),k._parseSecondsComponent(q,g[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "hour":switch(x.end.period){case "minute":v=RegExp("^[0-9]{1,}:[0-9]{1,}$");if(v.test(g))q.hour=parseFloat(g.split(":")[0]),q.minute=parseFloat(g.split(":")[1]);else throw Error("Illegal Interval");break;case "second":v=RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(v.test(g))g=g.split(":"),q.hour=parseFloat(g[0]),q.minute=
parseFloat(g[1]),k._parseSecondsComponent(q,g[2]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;case "minute":switch(x.end.period){case "second":v=RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$");if(v.test(g))g=g.split(":"),q.minute=parseFloat(g[0]),k._parseSecondsComponent(q,g[1]);else throw Error("Illegal Interval");break;default:throw Error("Invalid Interval.");}break;default:throw Error("Invalid Interval.");}}return q};k.prototype.valueInMilliseconds=
function(){return("-"===this.op?-1:1)*(this.millis+1E3*this.second+6E4*this.minute+36E5*this.hour+864E5*this.day+365/12*this.month*864E5+31536E6*this.year)};return k}();const h={extract:{minParams:2,maxParams:2,evaluate:([k,g])=>{if(null==g)return null;if(g instanceof Date)switch(k.toUpperCase()){case "SECOND":return g.getSeconds();case "MINUTE":return g.getMinutes();case "HOUR":return g.getHours();case "DAY":return g.getDate();case "MONTH":return g.getMonth()+1;case "YEAR":return g.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");
}},substring:{minParams:2,maxParams:3,evaluate:k=>{if(2===k.length){const [g,x]=k;return null==g||null==x?null:g.toString().substring(x-1)}if(3===k.length){const [g,x,N]=k;return null==g||null==x||null==N?null:0>=N?"":g.toString().substring(x-1,x+N-1)}}},position:{minParams:2,maxParams:2,evaluate:([k,g])=>null==k||null==g?null:g.indexOf(k)+1},trim:{minParams:2,maxParams:3,evaluate:k=>{var g=3===k.length,x=g?k[1]:" ";g=g?k[2]:k[1];if(null==x||null==g)return null;x=`(${R.escapeRegExpString(x)})`;switch(k[0]){case "BOTH":return g.replace(new RegExp(`^${x}*|${x}*$`,
"g"),"");case "LEADING":return g.replace(new RegExp(`^${x}*`,"g"),"");case "TRAILING":return g.replace(new RegExp(`${x}*$`,"g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.abs(k[0])},ceiling:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.ceil(k[0])},floor:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.floor(k[0])},log:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])},log10:{minParams:1,
maxParams:1,evaluate:k=>null==k[0]?null:Math.log(k[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sin(k[0])},cos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cos(k[0])},tan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tan(k[0])},asin:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.asin(k[0])},acos:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.acos(k[0])},atan:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.atan(k[0])},
sign:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:0<k[0]?1:0>k[1]?-1:0},power:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]**k[1]},mod:{minParams:2,maxParams:2,evaluate:k=>null==k[0]||null==k[1]?null:k[0]%k[1]},round:{minParams:1,maxParams:2,evaluate:k=>{const g=k[0];k=2===k.length?10**k[1]:1;return null==g?null:Math.round(g*k)/k}},truncate:{minParams:1,maxParams:2,evaluate:k=>null==k[0]?null:1===k.length?parseInt(k[0].toFixed(0),10):parseFloat(k[0].toFixed(k[1]))},
char_length:{minParams:1,maxParams:1,evaluate:k=>"string"===typeof k[0]||k[0]instanceof String?k[0].length:0},concat:{minParams:1,maxParams:Infinity,evaluate:k=>{let g="";for(let x=0;x<k.length;x++){if(null==k[x])return null;g+=k[x].toString()}return g}},lower:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:k[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:Infinity,evaluate:k=>{for(const g of k)if(null!==
g)return g;return null}},cosh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.cosh(k[0])},sinh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.sinh(k[0])},tanh:{minParams:1,maxParams:1,evaluate:k=>null==k[0]?null:Math.tanh(k[0])},nullif:{minParams:2,maxParams:2,evaluate:k=>{const g=k[0];k=k[1];return(g instanceof Date?g.valueOf():g)===(k instanceof Date?k.valueOf():k)?null:g}},cast:{minParams:2,maxParams:2,evaluate:k=>{var g=k[0];k=k[1];if(null===g)return null;switch(k.type){case "integer":g=
parseInt(g,10);if(isNaN(g))throw new E.SqlError(E.SqlErrorCodes.CannotCastValue);return g;case "smallint":g=parseInt(g,10);if(isNaN(g))throw new E.SqlError(E.SqlErrorCodes.CannotCastValue);if(32767<g||-32767>g)throw new E.SqlError(E.SqlErrorCodes.CannotCastValue);return g;case "float":case "real":g=parseFloat(g);if(isNaN(g))throw new E.SqlError(E.SqlErrorCodes.CannotCastValue);return g;case "date":return K(g,!0);case "timestamp":return K(g,!1);case "varchar":g=g.toString();if(g.length>k.size)throw new E.SqlError(E.SqlErrorCodes.CannotCastValue);
return g;default:throw new E.SqlError(E.SqlErrorCodes.InvalidDataType);}}}};t.SqlInterval=I;t.evaluateFunction=function(k,g){const x=h[k.toLowerCase()];if(null==x)throw Error("Function Not Recognised");if(g.length<x.minParams||g.length>x.maxParams)throw Error(`Invalid Parameter count for call to ${k.toUpperCase()}`);return x.evaluate(g)};t.isStandardized=function(k,g){k=h[k.toLowerCase()];return null!=k&&g>=k.minParams&&g<=k.maxParams};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/featureset/support/errorsupport":function(){define(["exports","../../../chunks/_rollupPluginBabelHelpers","../../executionError"],function(t,E,R){t.SqlErrorCodes=void 0;(function(h){h.InvalidFunctionParameters="InvalidFunctionParameters";h.UnsupportedSqlFunction="UnsupportedSqlFunction";h.UnsupportedOperator="UnsupportedOperator";h.UnsupportedSyntax="UnsupportedSyntax";h.UnsupportedIsRhs="UnsupportedIsRhs";h.UnsupportedIsLhs="UnsupportedIsLhs";h.InvalidDataType="InvalidDataType";h.CannotCastValue=
"CannotCastValue";h.MissingStatisticParameters="MissingStatisticParameters"})(t.SqlErrorCodes||(t.SqlErrorCodes={}));const U={[t.SqlErrorCodes.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[t.SqlErrorCodes.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[t.SqlErrorCodes.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[t.SqlErrorCodes.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[t.SqlErrorCodes.UnsupportedOperator]:"Unsupported operator - {operator}",
[t.SqlErrorCodes.UnsupportedSyntax]:"Unsupported syntax - {node}",[t.SqlErrorCodes.UnsupportedSqlFunction]:"Sql function not found \x3d {function}",[t.SqlErrorCodes.InvalidDataType]:"Invalid sql data type",[t.SqlErrorCodes.CannotCastValue]:"Cannot cast value to the required data type"};let A=function(h){function k(g,x){g=h.call(this,R.doSubstitutions(U[g],x))||this;g.declaredRootClass="esri.arcade.featureset.support.sqlerror";Error.captureStackTrace&&Error.captureStackTrace(E._assertThisInitialized(g),
k);return g}E._inheritsLoose(k,h);return k}(E._wrapNativeSuper(Error));t.FeatureSetErrorCodes=void 0;(function(h){h.NeverReach="NeverReach";h.NotImplemented="NotImplemented";h.Cancelled="Cancelled";h.InvalidStatResponse="InvalidStatResponse";h.InvalidRequest="InvalidRequest";h.RequestFailed="RequestFailed";h.MissingFeatures="MissingFeatures";h.AggregationFieldNotFound="AggregationFieldNotFound";h.DataElementsNotFound="DataElementsNotFound"})(t.FeatureSetErrorCodes||(t.FeatureSetErrorCodes={}));const K=
{[t.FeatureSetErrorCodes.Cancelled]:"Cancelled",[t.FeatureSetErrorCodes.InvalidStatResponse]:"Invalid statistics response from service",[t.FeatureSetErrorCodes.InvalidRequest]:"Invalid request",[t.FeatureSetErrorCodes.RequestFailed]:"Request failed - {reason}",[t.FeatureSetErrorCodes.MissingFeatures]:"Missing features",[t.FeatureSetErrorCodes.AggregationFieldNotFound]:"Aggregation field not found",[t.FeatureSetErrorCodes.DataElementsNotFound]:"Data elements not found on service",[t.FeatureSetErrorCodes.NeverReach]:"Encountered unreachable logic",
[t.FeatureSetErrorCodes.NotImplemented]:"Not implemented"};let I=function(h){function k(g,x){g=h.call(this,R.doSubstitutions(K[g],x))||this;g.declaredRootClass="esri.arcade.featureset.support.featureseterror";Error.captureStackTrace&&Error.captureStackTrace(E._assertThisInitialized(g),k);return g}E._inheritsLoose(k,h);return k}(E._wrapNativeSuper(Error));t.FeatureSetError=I;t.FeatureSetErrorMessages=K;t.SqlError=A;t.SqlErrorMessages=U;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},
"esri/arcade/executionError":function(){define(["exports","../chunks/_rollupPluginBabelHelpers"],function(t,E){function R(v){return v&&v.loc?`Line : ${v.loc.start?.line}, ${v.loc.start?.column}: `:""}function U(v,q){try{if(!q)return v;for(const w in q){let J=q[w];J||(J="");v=v.replace("{"+w+"}",q[w])}}catch(w){}return v}t.ExecutionErrorCodes=void 0;(function(v){v.AsyncNotEnabled="AsyncNotEnabled";v.ModulesNotSupported="ModulesNotSupported";v.CircularModules="CircularModules";v.NeverReach="NeverReach";
v.UnsupportedHashType="UnsupportedHashType";v.InvalidParameter="InvalidParameter";v.UnexpectedToken="UnexpectedToken";v.Unrecognised="Unrecognised";v.UnrecognisedType="UnrecognisedType";v.MaximumCallDepth="MaximumCallDepth";v.BooleanConditionRequired="BooleanConditionRequired";v.TypeNotAllowedInFeature="TypeNotAllowedInFeature";v.KeyMustBeString="KeyMustBeString";v.WrongNumberOfParameters="WrongNumberOfParameters";v.CallNonFunction="CallNonFunction";v.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral";
v.NoFunctionInDictionary="NoFunctionInDictionary";v.NoFunctionInArray="NoFunctionInArray";v.AssignModuleFunction="AssignModuleFunction";v.LogicExpressionOrAnd="LogicExpressionOrAnd";v.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean";v.FuncionNotFound="FunctionNotFound";v.InvalidMemberAccessKey="InvalidMemberAccessKey";v.UnsupportedUnaryOperator="UnsupportUnaryOperator";v.InvalidIdentifier="InvalidIdentifier";v.MemberOfNull="MemberOfNull";v.UnsupportedOperator="UnsupportedOperator";v.Cancelled=
"Cancelled";v.ModuleAccessorMustBeString="ModuleAccessorMustBeString";v.ModuleExportNotFound="ModuleExportNotFound";v.Immutable="Immutable";v.OutOfBounds="OutOfBounds";v.IllegalResult="IllegalResult";v.FieldNotFound="FieldNotFound";v.PortalRequired="PortalRequired";v.LogicError="LogicError";v.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber";v.KeyAccessorMustBeString="KeyAccessorMustBeString";v.WrongSpatialReference="WrongSpatialReference"})(t.ExecutionErrorCodes||(t.ExecutionErrorCodes={}));const A=
{[t.ExecutionErrorCodes.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[t.ExecutionErrorCodes.LogicError]:"Logic error - {reason}",[t.ExecutionErrorCodes.NeverReach]:"Encountered unreachable logic",[t.ExecutionErrorCodes.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[t.ExecutionErrorCodes.ModuleAccessorMustBeString]:"Module accessor must be a string",[t.ExecutionErrorCodes.ModuleExportNotFound]:"Module has no export with provided identifier",
[t.ExecutionErrorCodes.ModulesNotSupported]:"Current profile does not support modules",[t.ExecutionErrorCodes.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[t.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[t.ExecutionErrorCodes.FieldNotFound]:"Key not found - {key}",[t.ExecutionErrorCodes.CircularModules]:"Circular module dependencies are not allowed",[t.ExecutionErrorCodes.Cancelled]:"Execution cancelled",[t.ExecutionErrorCodes.UnsupportedHashType]:"Type not supported in hash function",
[t.ExecutionErrorCodes.IllegalResult]:"Value is not a supported return type",[t.ExecutionErrorCodes.PortalRequired]:"Portal is required",[t.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[t.ExecutionErrorCodes.WrongNumberOfParameters]:"Call with wrong number of parameters",[t.ExecutionErrorCodes.Unrecognised]:"Unrecognised code structure",[t.ExecutionErrorCodes.UnrecognisedType]:"Unrecognised type",[t.ExecutionErrorCodes.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",
[t.ExecutionErrorCodes.BooleanConditionRequired]:"Conditions must use booleans",[t.ExecutionErrorCodes.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[t.ExecutionErrorCodes.NoFunctionInArray]:"Arrays cannot contain functions.",[t.ExecutionErrorCodes.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[t.ExecutionErrorCodes.KeyAccessorMustBeString]:"Accessor must be a string",[t.ExecutionErrorCodes.KeyMustBeString]:"Object keys must be a string",[t.ExecutionErrorCodes.Immutable]:"Object is immutable",
[t.ExecutionErrorCodes.InvalidParameter]:"Invalid parameter",[t.ExecutionErrorCodes.UnexpectedToken]:"Unexpected token",[t.ExecutionErrorCodes.MemberOfNull]:"Cannot access property of null object",[t.ExecutionErrorCodes.MaximumCallDepth]:"Exceeded maximum function depth",[t.ExecutionErrorCodes.OutOfBounds]:"Out of bounds",[t.ExecutionErrorCodes.InvalidIdentifier]:"Identifier not recognised",[t.ExecutionErrorCodes.FuncionNotFound]:"Function not found",[t.ExecutionErrorCodes.CallNonFunction]:"Expression is not a function",
[t.ExecutionErrorCodes.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[t.ExecutionErrorCodes.AssignModuleFunction]:"Cannot assign function to module variable",[t.ExecutionErrorCodes.UnsupportedUnaryOperator]:"Unsupported unary operator",[t.ExecutionErrorCodes.UnsupportedOperator]:"Unsupported operator",[t.ExecutionErrorCodes.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[t.ExecutionErrorCodes.LogicExpressionOrAnd]:"Logical expression can only be combined with || or \x26\x26"};
let K=function(v){function q(...w){return v.call(this,...w)||this}E._inheritsLoose(q,v);return q}(E._wrapNativeSuper(Error)),I=function(v){function q(w,J){w=v.call(this,R(J)+w.message,{cause:w})||this;w.loc=null;Error.captureStackTrace&&Error.captureStackTrace(E._assertThisInitialized(w),q);J&&J.loc&&(w.loc=J.loc);return w}E._inheritsLoose(q,v);return q}(K),h=function(v){function q(w,J,C,ka){w=v.call(this,"Execution error - "+R(C)+U(A[J],ka))||this;w.loc=null;w.declaredRootClass="esri.arcade.arcadeexecutionerror";
Error.captureStackTrace&&Error.captureStackTrace(E._assertThisInitialized(w),q);C&&C.loc&&(w.loc=C.loc);return w}E._inheritsLoose(q,v);return q}(E._wrapNativeSuper(Error)),k=function(v){function q(w,J,C,ka){w=v.call(this,"Compilation error - "+R(C)+U(A[J],ka))||this;w.loc=null;w.declaredRootClass="esri.arcade.arcadecompilationerror";Error.captureStackTrace&&Error.captureStackTrace(E._assertThisInitialized(w),q);C&&C.loc&&(w.loc=C.loc);return w}E._inheritsLoose(q,v);return q}(E._wrapNativeSuper(Error)),
g=function(v){function q(){var w=v.call(this,"Uncompilable code structures")||this;w.declaredRootClass="esri.arcade.arcadeuncompilableerror";Error.captureStackTrace&&Error.captureStackTrace(E._assertThisInitialized(w),q);return w}E._inheritsLoose(q,v);return q}(E._wrapNativeSuper(Error));t.ModuleErrorCodes=void 0;(function(v){v.UnrecognisedUri="UnrecognisedUri";v.UnsupportedUriProtocol="UnsupportedUriProtocol"})(t.ModuleErrorCodes||(t.ModuleErrorCodes={}));const x={[t.ModuleErrorCodes.UnrecognisedUri]:"Unrecognised uri - {uri}",
[t.ModuleErrorCodes.UnsupportedUriProtocol]:"Unrecognised uri protocol"};let N=function(v){function q(w,J){w=v.call(this,U(x[w],J))||this;w.declaredRootClass="esri.arcade.arcademoduleerror";Error.captureStackTrace&&Error.captureStackTrace(E._assertThisInitialized(w),q);return w}E._inheritsLoose(q,v);return q}(E._wrapNativeSuper(Error));t.ArcadeCompilationError=k;t.ArcadeExecutionError=h;t.ArcadeUncompilableError=g;t.ErrorWithCause=K;t.ExecutionErrorMessages=A;t.LocatableArcadeExecutionError=I;t.ModuleError=
N;t.ModuleErrorMessages=x;t.doSubstitutions=U;t.ensureArcadeExecutionError=function(v,q,w){return"esri.arcade.arcadeexecutionerror"===w.declaredRootClass||"esri.arcade.arcadecompilationerror"===w.declaredRootClass?null===w.loc&&q&&q.loc?new I(w,{cause:w}):w:q&&q.loc?new I(w,{cause:w}):w};t.parsingValidationMessage=function(v,q,w){return"Parsing error - "+R(v)+U(A[q],w)};Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})},"esri/core/sql/WhereGrammar":function(){define(["exports","../../chunks/_commonjsHelpers"],
function(t,E){var R={};(function(A){(function(K,I){A.exports&&(A.exports=I())})(E.commonjsGlobal,function(){function K(h,k,g,x){h=Error.call(this,h);Object.setPrototypeOf&&Object.setPrototypeOf(h,K.prototype);h.expected=k;h.found=g;h.location=x;h.name="SyntaxError";return h}function I(h,k,g){g=g||" ";if(h.length>k)return h;k-=h.length;g+=g.repeat(k);return h+g.slice(0,k)}(function(h,k){function g(){this.constructor=h}g.prototype=k.prototype;h.prototype=new g})(K,Error);K.prototype.format=function(h){var k=
"Error: "+this.message;if(this.location){var g=null,x;for(x=0;x<h.length;x++)if(h[x].source===this.location.source){g=h[x].text.split(/\r\n|\n|\r/g);break}h=this.location.start;x=this.location.source+":"+h.line+":"+h.column;if(g){var N=this.location.end,v=I("",h.line.toString().length," ");g=g[h.line-1];N=(h.line===N.line?N.column:g.length+1)-h.column||1;k+="\n --\x3e "+x+"\n"+v+" |\n"+h.line+" | "+g+"\n"+v+" | "+I("",h.column-1," ")+I("",N,"^")}else k+="\n at "+x}return k};K.buildMessage=function(h,
k){function g(w){return w.charCodeAt(0).toString(16).toUpperCase()}function x(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(J){return"\\x0"+g(J)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(J){return"\\x"+g(J)})}function N(w){return w.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,
"\\r").replace(/[\x00-\x0F]/g,function(J){return"\\x0"+g(J)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(J){return"\\x"+g(J)})}function v(w){return q[w.type](w)}var q={literal:function(w){return'"'+x(w.text)+'"'},class:function(w){var J=w.parts.map(function(C){return Array.isArray(C)?N(C[0])+"-"+N(C[1]):N(C)});return"["+(w.inverted?"^":"")+J.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(w){return w.description}};return"Expected "+function(w){w=
w.map(v);var J,C;w.sort();if(0<w.length){for(C=J=1;J<w.length;J++)w[J-1]!==w[J]&&(w[C]=w[J],C++);w.length=C}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}(h)+" but "+(k?'"'+x(k)+'"':"end of input")+" found."};return{SyntaxError:K,parse:function(h,k){function g(c,d){return{type:"literal",text:c,ignoreCase:d}}function x(c,d,e){return{type:"class",parts:c,inverted:d,ignoreCase:e}}function N(c){var d=fb[c],e;if(!d){for(e=
c-1;!fb[e];)e--;d=fb[e];for(d={line:d.line,column:d.column};e<c;)10===h.charCodeAt(e)?(d.line++,d.column=1):d.column++,e++;fb[c]=d}return d}function v(c,d){var e=N(c),n=N(d);return{source:qd,start:{offset:c,line:e.line,column:e.column},end:{offset:d,line:n.line,column:n.column}}}function q(c){b<la||(b>la&&(la=b,Lb=[]),Lb.push(c))}function w(){var c=b;r();var d=C();d!==a?(r(),c=d):(b=c,c=a);return c}function J(){var c=b;var d=C();if(d!==a){c=[];var e=b;var n=r();var z=gb();if(z!==a){var G=r();var H=
C();H!==a?e=n=[n,z,G,H]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=r(),z=gb(),z!==a?(G=r(),H=C(),H!==a?e=n=[n,z,G,H]:(b=e,e=a)):(b=e,e=a);e={type:"expression-list"};d=[d];for(n=0;n<c.length;n++)d.push(c[n][3]);e.value=d;c=e}else b=c,c=a;return c}function C(){var c=b;var d=ka();if(d!==a){c=[];var e=b;var n=r();var z=ec();if(z!==a){var G=r();var H=ka();H!==a?e=n=[n,z,G,H]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=r(),z=ec(),z!==a?(G=r(),H=ka(),H!==a?e=n=[n,z,G,H]:(b=e,e=a)):(b=e,e=
a);c=Oa(d,c)}else b=c,c=a;return c}function ka(){var c=b;var d=ta();if(d!==a){c=[];var e=b;var n=r();var z=hb();if(z!==a){var G=r();var H=ta();H!==a?e=n=[n,z,G,H]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=r(),z=hb(),z!==a?(G=r(),H=ta(),H!==a?e=n=[n,z,G,H]:(b=e,e=a)):(b=e,e=a);c=Oa(d,c)}else b=c,c=a;return c}function ta(){var c=b;var d=Pa();if(d===a){d=b;if(33===h.charCodeAt(b)){var e=rd;b++}else e=a,0===l&&q(sd);if(e!==a){var n=b;l++;if(61===h.charCodeAt(b)){var z=fc;b++}else z=a,0===l&&
q(gc);l--;z===a?n=void 0:(b=n,n=a);n!==a?d=e=[e,n]:(b=d,d=a)}else b=d,d=a}d!==a?(e=r(),n=ta(),n!==a?c={type:"unary-expression",operator:"NOT",expr:n}:(b=c,c=a)):(b=c,c=a);if(c===a){d=b;c=fa();if(c!==a){r();d=[];e=b;n=r();z=Qa();if(z!==a){var G=r();var H=fa();H!==a?e=n=[n,z,G,H]:(b=e,e=a)}else b=e,e=a;if(e!==a)for(;e!==a;)d.push(e),e=b,n=r(),z=Qa(),z!==a?(G=r(),H=fa(),H!==a?e=n=[n,z,G,H]:(b=e,e=a)):(b=e,e=a);else d=a;d!==a&&(d={type:"arithmetic",tail:d});d===a&&(d=b,e=Ra(),e!==a?(r(),n=V(),n!==a?(r(),
n=J(),n!==a?(r(),z=W(),z!==a?d={op:e,right:n}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=Ra(),e!==a?(r(),n=V(),n!==a?(r(),n=W(),n!==a?d={op:e,right:{type:"expression-list",value:[]}}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=Ra(),e!==a?(r(),n=m(),n!==a?d={op:e,right:n}:(b=d,d=a)):(b=d,d=a))),d===a&&(d=b,z=Pa(),z!==a?(r(),e=hc(),e!==a?(r(),n=fa(),n!==a?(r(),G=hb(),G!==a?(r(),z=fa(),z!==a?d={op:"NOT"+e,right:{type:"expression-list",value:[n,z]}}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=
d,d=a)):(b=d,d=a),d===a&&(d=b,z=hc(),z!==a?(r(),e=fa(),e!==a?(r(),n=hb(),n!==a?(r(),G=fa(),G!==a?d={op:z,right:{type:"expression-list",value:[e,G]}}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a)),d===a&&(d=b,e=ic(),e!==a?(r(),n=Pa(),n!==a?(r(),n=fa(),n!==a?d={op:e+"NOT",right:n}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=ic(),e!==a?(r(),n=fa(),n!==a?d={op:e,right:n}:(b=d,d=a)):(b=d,d=a)),d===a&&(d=b,e=Sa(),e!==a?(r(),n=Q(),n!==a?(r(),z=b,h.substr(b,6).toLowerCase()===td?(G=h.substr(b,6),b+=6):(G=
a,0===l&&q(ud)),G!==a?(G=b,l++,H=D(),l--,H===a?G=void 0:(b=G,G=a),G!==a?z="ESCAPE":(b=z,z=a)):(b=z,z=a),z!==a?(r(),z=X(),z!==a?d={op:e,right:n,escape:z.value}:(b=d,d=a)):(b=d,d=a)):(b=d,d=a)):(b=d,d=a),d===a&&(d=b,e=Sa(),e!==a?(r(),n=Q(),n!==a?d={op:e,right:n,escape:""}:(b=d,d=a)):(b=d,d=a))))));d===a&&(d=null);""==d||void 0==d||null==d?d=c:(e=null,d=e="arithmetic"==d.type?Oa(c,d.tail):jc(d.op,c,d.right,d.escape))}else b=d,d=a;c=d}return c}function Qa(){if(h.substr(b,2)===kc){var c=kc;b+=2}else c=
a,0===l&&q(vd);c===a&&(62===h.charCodeAt(b)?(c=wd,b++):(c=a,0===l&&q(xd)),c===a&&(h.substr(b,2)===lc?(c=lc,b+=2):(c=a,0===l&&q(yd)),c===a&&(h.substr(b,2)===mc?(c=mc,b+=2):(c=a,0===l&&q(zd)),c===a&&(60===h.charCodeAt(b)?(c=Ad,b++):(c=a,0===l&&q(Bd)),c===a&&(61===h.charCodeAt(b)?(c=fc,b++):(c=a,0===l&&q(gc)),c===a&&(h.substr(b,2)===nc?(c=nc,b+=2):(c=a,0===l&&q(Cd))))))));return c}function Sa(){var c=c=b;var d=Pa();if(d!==a){var e=r();var n=oc();n!==a?c=d=[d,e,n]:(b=c,c=a)}else b=c,c=a;c!==a&&(c=c[0]+
" "+c[2]);c===a&&(c=oc());return c}function Ra(){var c=c=b;var d=Pa();if(d!==a){var e=r();var n=Mb();n!==a?c=d=[d,e,n]:(b=c,c=a)}else b=c,c=a;c!==a&&(c=c[0]+" "+c[2]);c===a&&(c=Mb());return c}function fa(){var c=b;var d=Ta();if(d!==a){c=[];var e=b;var n=r();var z=ib();if(z!==a){var G=r();var H=Ta();H!==a?e=n=[n,z,G,H]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=r(),z=ib(),z!==a?(G=r(),H=Ta(),H!==a?e=n=[n,z,G,H]:(b=e,e=a)):(b=e,e=a);c=Oa(d,c)}else b=c,c=a;return c}function ib(){if(43===h.charCodeAt(b)){var c=
Nb;b++}else c=a,0===l&&q(Ob);c===a&&(45===h.charCodeAt(b)?(c=Pb,b++):(c=a,0===l&&q(Qb)),c===a&&(h.substr(b,2)===pc?(c=pc,b+=2):(c=a,0===l&&q(Dd))));return c}function Ta(){var c=b;var d=Ua();if(d!==a){c=[];var e=b;var n=r();var z=jb();if(z!==a){var G=r();var H=Ua();H!==a?e=n=[n,z,G,H]:(b=e,e=a)}else b=e,e=a;for(;e!==a;)c.push(e),e=b,n=r(),z=jb(),z!==a?(G=r(),H=Ua(),H!==a?e=n=[n,z,G,H]:(b=e,e=a)):(b=e,e=a);c=Oa(d,c)}else b=c,c=a;return c}function jb(){if(42===h.charCodeAt(b)){var c=Ed;b++}else c=a,
0===l&&q(Fd);c===a&&(47===h.charCodeAt(b)?(c=Gd,b++):(c=a,0===l&&q(Hd)));return c}function Ua(){var c=X();if(c===a){var d=b;var e=b;var n=xa();if(n!==a){var z=qc();if(z!==a){var G=rc();G!==a?e=parseFloat(n+z+G):(b=e,e=a)}else b=e,e=a}else b=e,e=a;e===a&&(e=b,n=xa(),n!==a?(z=qc(),z!==a?e=parseFloat(n+z):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,n=xa(),n!==a?(z=rc(),z!==a?e=parseFloat(n+z):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,n=xa(),n!==a&&(n=parseFloat(n)),e=n)));var H=e;if(H!==a){var kb=b;l++;var Id=ha();l--;
Id===a?kb=void 0:(b=kb,kb=a);kb!==a?d={type:"number",value:H}:(b=d,d=a)}else b=d,d=a;c=d;if(c===a){var Va=b;var ya=b;if(h.substr(b,4).toLowerCase()===Jd){var lb=h.substr(b,4);b+=4}else lb=a,0===l&&q(Kd);if(lb!==a){var Wa=b;l++;var Ld=D();l--;Ld===a?Wa=void 0:(b=Wa,Wa=a);Wa!==a?ya=lb=[lb,Wa]:(b=ya,ya=a)}else b=ya,ya=a;var ua=ya;ua!==a&&(ua={type:"boolean",value:!0});Va=ua;if(Va===a){Va=b;var za=b;if(h.substr(b,5).toLowerCase()===Md){var mb=h.substr(b,5);b+=5}else mb=a,0===l&&q(Nd);if(mb!==a){var Xa=
b;l++;var Od=D();l--;Od===a?Xa=void 0:(b=Xa,Xa=a);Xa!==a?za=mb=[mb,Xa]:(b=za,za=a)}else b=za,za=a;ua=za;ua!==a&&(ua={type:"boolean",value:!1});Va=ua}c=Va;if(c===a){var Aa=b;if(h.substr(b,4).toLowerCase()===Pd){var nb=h.substr(b,4);b+=4}else nb=a,0===l&&q(Qd);if(nb!==a){var Ya=b;l++;var Rd=D();l--;Rd===a?Ya=void 0:(b=Ya,Ya=a);Ya!==a?Aa=nb=[nb,Ya]:(b=Aa,Aa=a)}else b=Aa,Aa=a;var Rb=Aa;Rb!==a&&(Rb={type:"null",value:null});c=Rb;if(c===a){var Ba=b;if(sc()!==a){r();var tc=Q();tc!==a?Ba={type:"date",value:tc.value}:
(b=Ba,Ba=a)}else b=Ba,Ba=a;c=Ba;if(c===a){var Ca=b;if(uc()!==a){r();var vc=Q();vc!==a?Ca={type:"timestamp",value:vc.value}:(b=Ca,Ca=a)}else b=Ca,Ca=a;c=Ca;if(c===a){var S=b;var Sb=wc();if(Sb!==a){r();if(45===h.charCodeAt(b)){var oa=Pb;b++}else oa=a,0===l&&q(Qb);oa===a&&(43===h.charCodeAt(b)?(oa=Nb,b++):(oa=a,0===l&&q(Ob)));if(oa!==a){r();var Za=Q();if(Za!==a){r();var xc=p();xc!==a?S={type:"interval",value:Za,qualifier:xc,op:oa}:(b=S,S=a)}else b=S,S=a}else b=S,S=a}else b=S,S=a;S===a&&(S=b,Sb=wc(),
Sb!==a?(r(),oa=Q(),oa!==a?(r(),Za=p(),Za!==a?S={type:"interval",value:oa,qualifier:Za,op:""}:(b=S,S=a)):(b=S,S=a)):(b=S,S=a));c=S}}}}}}var L=c;if(L===a){var Z=b;var Da=b;if(h.substr(b,7).toLowerCase()===Sd){var yc=h.substr(b,7);b+=7}else yc=a,0===l&&q(Td);if(yc!==a){var ob=b;l++;var Ud=D();l--;Ud===a?ob=void 0:(b=ob,ob=a);ob!==a?Da="EXTRACT":(b=Da,Da=a)}else b=Da,Da=a;if(Da!==a){r();var Vd=V();if(Vd!==a){r();var ia=zc();ia===a&&(ia=Ac(),ia===a&&(ia=Bc(),ia===a&&(ia=Cc(),ia===a&&(ia=Dc(),ia===a&&(ia=
va())))));var Ec=ia;if(Ec!==a){r();var Wd=Tb();if(Wd!==a){r();var Fc=C();if(Fc!==a){r();var Xd=W();Xd!==a?Z={type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:Ec},Fc]}}:(b=Z,Z=a)}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a}else b=Z,Z=a;L=Z;if(L===a){var aa=b;var Ea=b;if(h.substr(b,9).toLowerCase()===Yd){var Gc=h.substr(b,9);b+=9}else Gc=a,0===l&&q(Zd);if(Gc!==a){var pb=b;l++;var $d=D();l--;$d===a?pb=void 0:(b=pb,pb=a);pb!==a?Ea="SUBSTRING":(b=Ea,Ea=a)}else b=
Ea,Ea=a;if(Ea!==a){r();var ae=V();if(ae!==a){r();var Ub=C();if(Ub!==a){r();var be=Tb();if(be!==a){r();var Vb=C();if(Vb!==a){r();var pa=b;var Fa=b;if(h.substr(b,3).toLowerCase()===ce){var Hc=h.substr(b,3);b+=3}else Hc=a,0===l&&q(de);if(Hc!==a){var qb=b;l++;var ee=D();l--;ee===a?qb=void 0:(b=qb,qb=a);qb!==a?Fa="FOR":(b=Fa,Fa=a)}else b=Fa,Fa=a;var $a=Fa;if($a!==a){var fe=r();var Ic=C();if(Ic!==a){var ge=r();pa=$a=[$a,fe,Ic,ge]}else b=pa,pa=a}else b=pa,pa=a;pa===a&&(pa=null);$a=W();$a!==a?aa={type:"function",
name:"substring",args:{type:"expression-list",value:pa?[Ub,Vb,pa[2]]:[Ub,Vb]}}:(b=aa,aa=a)}else b=aa,aa=a}else b=aa,aa=a}else b=aa,aa=a}else b=aa,aa=a}else b=aa,aa=a;L=aa;if(L===a){var O=b;var Wb=Jc();if(Wb!==a){r();var Xb=V();if(Xb!==a){r();var qa=f();qa===a&&(qa=null);r();var ab=C();if(ab!==a){r();var Yb=Tb();if(Yb!==a){r();var Kc=C();if(Kc!==a){r();var he=W();he!==a?O={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==qa?"BOTH":qa},ab,Kc]}}:(b=O,O=a)}else b=
O,O=a}else b=O,O=a}else b=O,O=a}else b=O,O=a}else b=O,O=a;O===a&&(O=b,Wb=Jc(),Wb!==a?(r(),Xb=V(),Xb!==a?(r(),qa=f(),qa===a&&(qa=null),r(),ab=C(),ab!==a?(r(),Yb=W(),Yb!==a?O={type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:null==qa?"BOTH":qa},ab]}}:(b=O,O=a)):(b=O,O=a)):(b=O,O=a)):(b=O,O=a));L=O;if(L===a){var ba=b;var Ga=b;if(h.substr(b,8).toLowerCase()===ie){var Lc=h.substr(b,8);b+=8}else Lc=a,0===l&&q(je);if(Lc!==a){var rb=b;l++;var ke=D();l--;ke===a?rb=void 0:
(b=rb,rb=a);rb!==a?Ga="POSITION":(b=Ga,Ga=a)}else b=Ga,Ga=a;if(Ga!==a){r();var le=V();if(le!==a){r();var Mc=C();if(Mc!==a){r();var me=Mb();if(me!==a){r();var Nc=C();if(Nc!==a){r();var ne=W();ne!==a?ba={type:"function",name:"position",args:{type:"expression-list",value:[Mc,Nc]}}:(b=ba,ba=a)}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a}else b=ba,ba=a;L=ba;if(L===a){var ca=b;var Ha=b;if(h.substr(b,4).toLowerCase()===oe){var Oc=h.substr(b,4);b+=4}else Oc=a,0===l&&q(pe);if(Oc!==a){var sb=
b;l++;var qe=D();l--;qe===a?sb=void 0:(b=sb,sb=a);sb!==a?Ha="CAST":(b=Ha,Ha=a)}else b=Ha,Ha=a;if(Ha!==a){r();var re=V();if(re!==a){r();var Pc=C();if(Pc!==a){r();var Ia=b;if(h.substr(b,2).toLowerCase()===se){var Qc=h.substr(b,2);b+=2}else Qc=a,0===l&&q(te);if(Qc!==a){var tb=b;l++;var ue=D();l--;ue===a?tb=void 0:(b=tb,tb=a);tb!==a?Ia="AS":(b=Ia,Ia=a)}else b=Ia,Ia=a;var ve=Ia;if(ve!==a){r();var M=b;var Ja=b;if(h.substr(b,7).toLowerCase()===we){var Rc=h.substr(b,7);b+=7}else Rc=a,0===l&&q(xe);if(Rc!==
a){var ub=b;l++;var ye=D();l--;ye===a?ub=void 0:(b=ub,ub=a);ub!==a?Ja="INTEGER":(b=Ja,Ja=a)}else b=Ja,Ja=a;var P=Ja;P!==a&&(P={type:"data-type",value:{type:"integer"}});M=P;if(M===a){M=b;var Ka=b;if(h.substr(b,8).toLowerCase()===ze){var Sc=h.substr(b,8);b+=8}else Sc=a,0===l&&q(Ae);if(Sc!==a){var vb=b;l++;var Be=D();l--;Be===a?vb=void 0:(b=vb,vb=a);vb!==a?Ka="SMALLINT":(b=Ka,Ka=a)}else b=Ka,Ka=a;P=Ka;P!==a&&(P={type:"data-type",value:{type:"smallint"}});M=P;if(M===a){M=b;var La=b;if(h.substr(b,5).toLowerCase()===
Ce){var Tc=h.substr(b,5);b+=5}else Tc=a,0===l&&q(De);if(Tc!==a){var wb=b;l++;var Ee=D();l--;Ee===a?wb=void 0:(b=wb,wb=a);wb!==a?La="FLOAT":(b=La,La=a)}else b=La,La=a;P=La;P!==a&&(P={type:"data-type",value:{type:"float"}});M=P;if(M===a){M=b;var Ma=b;if(h.substr(b,4).toLowerCase()===Fe){var Uc=h.substr(b,4);b+=4}else Uc=a,0===l&&q(Ge);if(Uc!==a){var xb=b;l++;var He=D();l--;He===a?xb=void 0:(b=xb,xb=a);xb!==a?Ma="REAL":(b=Ma,Ma=a)}else b=Ma,Ma=a;P=Ma;P!==a&&(P={type:"data-type",value:{type:"real"}});
M=P;if(M===a&&(M=b,P=sc(),P!==a&&(P={type:"data-type",value:{type:"date"}}),M=P,M===a&&(M=b,P=uc(),P!==a&&(P={type:"data-type",value:{type:"timestamp"}}),M=P,M===a))){M=b;var Na=b;if(h.substr(b,7).toLowerCase()===Ie){var Vc=h.substr(b,7);b+=7}else Vc=a,0===l&&q(Je);if(Vc!==a){var yb=b;l++;var Ke=D();l--;Ke===a?yb=void 0:(b=yb,yb=a);yb!==a?Na="VARCHAR":(b=Na,Na=a)}else b=Na,Na=a;P=Na;if(P!==a){r();var Le=V();if(Le!==a){r();var Wc=wa();if(Wc!==a){r();var Me=W();Me!==a?M={type:"data-type",value:{type:"varchar",
size:parseInt(Wc)}}:(b=M,M=a)}else b=M,M=a}else b=M,M=a}else b=M,M=a}}}}var Xc=M;if(Xc!==a){r();var Ne=W();Ne!==a?ca={type:"function",name:"cast",args:{type:"expression-list",value:[Pc,Xc]}}:(b=ca,ca=a)}else b=ca,ca=a}else b=ca,ca=a}else b=ca,ca=a}else b=ca,ca=a}else b=ca,ca=a;L=ca;if(L===a){var sa=b;var zb;var ja=b;ja=zb=Ab();if(ja===a)if(ja=b,96===h.charCodeAt(b)?(zb=Yc,b++):(zb=a,0===l&&q(Zc)),zb!==a){var Bb=[];if($c.test(h.charAt(b))){var ra=h.charAt(b);b++}else ra=a,0===l&&q(ad);if(ra!==a)for(;ra!==
a;)Bb.push(ra),$c.test(h.charAt(b))?(ra=h.charAt(b),b++):(ra=a,0===l&&q(ad));else Bb=a;Bb!==a?(96===h.charCodeAt(b)?(ra=Yc,b++):(ra=a,0===l&&q(Zc)),ra!==a?ja=Bb.join(""):(b=ja,ja=a)):(b=ja,ja=a)}else b=ja,ja=a;var bd=ja;if(bd!==a){r();var Oe=V();if(Oe!==a){r();var Cb=J();Cb===a&&(Cb=null);r();var Pe=W();Pe!==a?sa={type:"function",name:bd,args:Cb?Cb:{type:"expression-list",value:[]}}:(b=sa,sa=a)}else b=sa,sa=a}else b=sa,sa=a;L=sa;if(L===a){var ma;var T=b;var Zb=Db();if(Zb!==a){r();var bb=C();if(bb!==
a){r();var cb=[];for(ma=ea();ma!==a;)cb.push(ma),ma=ea();ma=r();var Fb=Eb();Fb!==a?T={type:"case-expression",format:"simple",operand:bb,clauses:cb,else:null}:(b=T,T=a)}else b=T,T=a}else b=T,T=a;if(T===a)if(T=b,Zb=Db(),Zb!==a)if(r(),bb=C(),bb!==a){r();cb=[];for(ma=ea();ma!==a;)cb.push(ma),ma=ea();ma=r();Fb=db();if(Fb!==a){r();var Qe=Eb();Qe!==a?T={type:"case-expression",format:"simple",operand:bb,clauses:cb,else:Fb.value}:(b=T,T=a)}else b=T,T=a}else b=T,T=a;else b=T,T=a;var $b=T;if($b===a){var na;
var Y=b;var ac=Db();if(ac!==a){r();var eb=[];for(na=da();na!==a;)eb.push(na),na=da();na=r();var Gb=Eb();Gb!==a?Y={type:"case-expression",format:"searched",clauses:eb,else:null}:(b=Y,Y=a)}else b=Y,Y=a;if(Y===a)if(Y=b,ac=Db(),ac!==a){r();eb=[];for(na=da();na!==a;)eb.push(na),na=da();na=r();Gb=db();if(Gb!==a){r();var Re=Eb();Re!==a?Y={type:"case-expression",format:"searched",clauses:eb,else:Gb.value}:(b=Y,Y=a)}else b=Y,Y=a}else b=Y,Y=a;$b=Y}L=$b;if(L===a){var Hb;var Ib=b;var cd=ha();if(cd!==a){var dd=
[];for(Hb=u();Hb!==a;)dd.push(Hb),Hb=u();Ib=cd+dd.join("")}else b=Ib,Ib=a;var Jb=Ib;if(Jb!==a){var bc=Jb;Jb=/^CURRENT_DATE$/i.test(bc)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(bc)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:bc}}L=Jb;if(L===a&&(L=m(),L===a)){L=b;var Se=V();if(Se!==a){r();var cc=C();if(cc!==a){r();var Te=W();Te!==a?(cc.paren=!0,L=cc):(b=L,L=a)}else b=L,L=a}else b=L,L=a}}}}}}}}}return L}function Ab(){var c;var d=b;var e=ha();if(e!==
a){d=[];for(c=D();c!==a;)d.push(c),c=D();d=e+d.join("")}else b=d,d=a;return d}function ha(){if(Ue.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q(Ve);return c}function D(){if(We.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q(Xe);return c}function u(){if(Ye.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q(Ze);return c}function m(){var c=b;if(64===h.charCodeAt(b)){var d=$e;b++}else d=a,0===l&&q(af);if(d!==a){var e=Ab();e!==a?c=d=[d,e]:(b=c,c=a)}else b=c,c=a;c!==a&&(c=
{type:"parameter",value:c[1]});return c}function f(){var c=b;if(h.substr(b,7).toLowerCase()===bf){var d=h.substr(b,7);b+=7}else d=a,0===l&&q(cf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="LEADING":(b=c,c=a)}else b=c,c=a;c===a&&(c=b,h.substr(b,8).toLowerCase()===df?(d=h.substr(b,8),b+=8):(d=a,0===l&&q(ef)),d!==a?(d=b,l++,e=D(),l--,e===a?d=void 0:(b=d,d=a),d!==a?c="TRAILING":(b=c,c=a)):(b=c,c=a),c===a&&(c=b,h.substr(b,4).toLowerCase()===ff?(d=h.substr(b,4),b+=4):(d=a,0===l&&q(gf)),
d!==a?(d=b,l++,e=D(),l--,e===a?d=void 0:(b=d,d=a),d!==a?c="BOTH":(b=c,c=a)):(b=c,c=a)));return c}function p(){var c=b;var d=b;var e=y();if(e!==a){r();var n=V();if(n!==a)if(r(),n=F(),n!==a){r();var z=W();z!==a?d={type:"interval-period",period:e.value,precision:n,secondary:null}:(b=d,d=a)}else b=d,d=a;else b=d,d=a}else b=d,d=a;d===a&&(d=b,e=y(),e!==a&&(e={type:"interval-period",period:e.value,precision:null,secondary:null}),d=e);if(d!==a)if(r(),e=b,h.substr(b,2).toLowerCase()===hf?(n=h.substr(b,2),
b+=2):(n=a,0===l&&q(jf)),n!==a?(n=b,l++,z=D(),l--,z===a?n=void 0:(b=n,n=a),n!==a?e="TO":(b=e,e=a)):(b=e,e=a),e!==a){r();e=b;n=y();n!==a&&(n={type:"interval-period",period:n.value,precision:null,secondary:null});e=n;if(e===a){e=b;n=va();if(n!==a)if(r(),n=V(),n!==a)if(r(),n=F(),n!==a)if(r(),z=gb(),z!==a)if(r(),z=B(),z!==a){r();var G=W();G!==a?e={type:"interval-period",period:"second",precision:n,secondary:z}:(b=e,e=a)}else b=e,e=a;else b=e,e=a;else b=e,e=a;else b=e,e=a;else b=e,e=a;e===a&&(e=b,n=va(),
n!==a?(r(),n=V(),n!==a?(r(),n=F(),n!==a?(r(),z=W(),z!==a?e={type:"interval-period",period:"second",precision:n,secondary:null}:(b=e,e=a)):(b=e,e=a)):(b=e,e=a)):(b=e,e=a),e===a&&(e=b,n=va(),n!==a&&(n={type:"interval-period",period:"second",precision:null,secondary:null}),e=n))}e!==a?c={type:"interval-qualifier",start:d,end:e}:(b=c,c=a)}else b=c,c=a;else b=c,c=a;c===a&&(c=b,e=y(),e!==a?(r(),d=V(),d!==a?(r(),d=B(),d!==a?(r(),n=W(),n!==a?c={type:"interval-period",period:e.value,precision:d,secondary:null}:
(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a),c===a&&(c=b,e=y(),e!==a&&(e={type:"interval-period",period:e.value,precision:null,secondary:null}),c=e,c===a&&(c=b,e=va(),e!==a?(r(),d=V(),d!==a?(r(),d=F(),d!==a?(r(),n=gb(),n!==a?(r(),e=B(),e!==a?(r(),n=W(),n!==a?c={type:"interval-period",period:"second",precision:d,secondary:e}:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a),c===a&&(c=b,e=va(),e!==a?(r(),d=V(),d!==a?(r(),d=B(),d!==a?(r(),n=W(),n!==a?c={type:"interval-period",period:"second",
precision:d,secondary:null}:(b=c,c=a)):(b=c,c=a)):(b=c,c=a)):(b=c,c=a),c===a&&(c=b,e=va(),e!==a&&(e={type:"interval-period",period:"second",precision:null,secondary:null}),c=e)))));return c}function y(){var c=b;c=Bc();c!==a&&(c={type:"string",value:"day"});c===a&&(c=b,c=Cc(),c!==a&&(c={type:"string",value:"hour"}),c===a&&(c=b,c=Dc(),c!==a&&(c={type:"string",value:"minute"}),c===a&&(c=b,c=Ac(),c!==a&&(c={type:"string",value:"month"}),c===a&&(c=b,c=zc(),c!==a&&(c={type:"string",value:"year"})))));return c}
function B(){var c=wa();c!==a&&(c=parseFloat(c));return c}function F(){var c=wa();c!==a&&(c=parseFloat(c));return c}function Q(){var c=X();c===a&&(c=m());return c}function X(){var c=b;if(39===h.charCodeAt(b)){var d=ed;b++}else d=a,0===l&&q(fd);d===a&&(h.substr(b,2)===gd?(d=gd,b+=2):(d=a,0===l&&q(kf)));if(d!==a){d=[];var e=b;h.substr(b,2)===Kb?(e=Kb,b+=2):(e=a,0===l&&q(hd));e!==a&&(e="'");e===a&&(id.test(h.charAt(b))?(e=h.charAt(b),b++):(e=a,0===l&&q(jd)));for(;e!==a;)d.push(e),e=b,h.substr(b,2)===
Kb?(e=Kb,b+=2):(e=a,0===l&&q(hd)),e!==a&&(e="'"),e===a&&(id.test(h.charAt(b))?(e=h.charAt(b),b++):(e=a,0===l&&q(jd)));39===h.charCodeAt(b)?(e=ed,b++):(e=a,0===l&&q(fd));e!==a?c={type:"string",value:d.join("")}:(b=c,c=a)}else b=c,c=a;return c}function da(){var c=b;if(kd()!==a){r();var d=C();if(d!==a){r();var e=ld();e!==a?(r(),e=C(),e!==a?c={type:"when-clause",operand:d,value:e}:(b=c,c=a)):(b=c,c=a)}else b=c,c=a}else b=c,c=a;return c}function ea(){var c=b;if(kd()!==a){r();var d=C();if(d!==a){r();var e=
ld();e!==a?(r(),e=C(),e!==a?c={type:"when-clause",operand:d,value:e}:(b=c,c=a)):(b=c,c=a)}else b=c,c=a}else b=c,c=a;return c}function db(){var c=b;var d=b;if(h.substr(b,4).toLowerCase()===lf){var e=h.substr(b,4);b+=4}else e=a,0===l&&q(mf);if(e!==a){e=b;l++;var n=D();l--;n===a?e=void 0:(b=e,e=a);e!==a?d="ELSE":(b=d,d=a)}else b=d,d=a;d!==a?(r(),d=C(),d!==a?c={type:"else-clause",value:d}:(b=c,c=a)):(b=c,c=a);return c}function xa(){var c=wa();if(c===a){c=b;if(45===h.charCodeAt(b)){var d=Pb;b++}else d=
a,0===l&&q(Qb);d===a&&(43===h.charCodeAt(b)?(d=Nb,b++):(d=a,0===l&&q(Ob)));if(d!==a){var e=wa();e!==a?c=d[0]+e:(b=c,c=a)}else b=c,c=a}return c}function qc(){var c=b;if(46===h.charCodeAt(b)){var d=nf;b++}else d=a,0===l&&q(of);d!==a?(c=wa(),c===a&&(c=null),c="."+(null!=c?c:"")):(b=c,c=a);return c}function rc(){var c;var d=c=b;if(pf.test(h.charAt(b))){var e=h.charAt(b);b++}else e=a,0===l&&q(qf);e!==a?(rf.test(h.charAt(b))?(d=h.charAt(b),b++):(d=a,0===l&&q(sf)),d===a&&(d=null),d="e"+(null===d?"":d)):
(b=d,d=a);d!==a?(e=wa(),e!==a?c=d+e:(b=c,c=a)):(b=c,c=a);return c}function wa(){var c=[];var d=md();if(d!==a)for(;d!==a;)c.push(d),d=md();else c=a;c!==a&&(c=c.join(""));return c}function md(){if(tf.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q(uf);return c}function Mb(){var c=b;if(h.substr(b,2).toLowerCase()===vf){var d=h.substr(b,2);b+=2}else d=a,0===l&&q(wf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="IN":(b=c,c=a)}else b=c,c=a;return c}function ic(){var c=b;if(h.substr(b,
2).toLowerCase()===xf){var d=h.substr(b,2);b+=2}else d=a,0===l&&q(yf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="IS":(b=c,c=a)}else b=c,c=a;return c}function oc(){var c=b;if(h.substr(b,4).toLowerCase()===zf){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(Af);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="LIKE":(b=c,c=a)}else b=c,c=a;return c}function Pa(){var c=b;if(h.substr(b,3).toLowerCase()===Bf){var d=h.substr(b,3);b+=3}else d=a,0===l&&q(Cf);if(d!==a){d=b;
l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="NOT":(b=c,c=a)}else b=c,c=a;return c}function hb(){var c=b;if(h.substr(b,3).toLowerCase()===Df){var d=h.substr(b,3);b+=3}else d=a,0===l&&q(Ef);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="AND":(b=c,c=a)}else b=c,c=a;return c}function ec(){var c=b;if(h.substr(b,2).toLowerCase()===Ff){var d=h.substr(b,2);b+=2}else d=a,0===l&&q(Gf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="OR":(b=c,c=a)}else b=c,c=a;return c}
function hc(){var c=b;if(h.substr(b,7).toLowerCase()===Hf){var d=h.substr(b,7);b+=7}else d=a,0===l&&q(If);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="BETWEEN":(b=c,c=a)}else b=c,c=a;return c}function Tb(){var c=b;if(h.substr(b,4).toLowerCase()===Jf){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(Kf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="FROM":(b=c,c=a)}else b=c,c=a;return c}function Jc(){var c=b;if(h.substr(b,4).toLowerCase()===Lf){var d=h.substr(b,4);
b+=4}else d=a,0===l&&q(Mf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="TRIM":(b=c,c=a)}else b=c,c=a;return c}function uc(){var c=b;if(h.substr(b,9).toLowerCase()===Nf){var d=h.substr(b,9);b+=9}else d=a,0===l&&q(Of);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="TIMESTAMP":(b=c,c=a)}else b=c,c=a;return c}function sc(){var c=b;if(h.substr(b,4).toLowerCase()===Pf){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(Qf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=
d,d=a);d!==a?c="DATE":(b=c,c=a)}else b=c,c=a;return c}function wc(){var c=b;if(h.substr(b,8).toLowerCase()===Rf){var d=h.substr(b,8);b+=8}else d=a,0===l&&q(Sf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="INTERVAL":(b=c,c=a)}else b=c,c=a;return c}function zc(){var c=b;if(h.substr(b,4).toLowerCase()===Tf){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(Uf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="YEAR":(b=c,c=a)}else b=c,c=a;return c}function Ac(){var c=b;if(h.substr(b,
5).toLowerCase()===Vf){var d=h.substr(b,5);b+=5}else d=a,0===l&&q(Wf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="MONTH":(b=c,c=a)}else b=c,c=a;return c}function Bc(){var c=b;if(h.substr(b,3).toLowerCase()===Xf){var d=h.substr(b,3);b+=3}else d=a,0===l&&q(Yf);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="DAY":(b=c,c=a)}else b=c,c=a;return c}function Cc(){var c=b;if(h.substr(b,4).toLowerCase()===Zf){var d=h.substr(b,4);b+=4}else d=a,0===l&&q($f);if(d!==a){d=
b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="HOUR":(b=c,c=a)}else b=c,c=a;return c}function Dc(){var c=b;if(h.substr(b,6).toLowerCase()===ag){var d=h.substr(b,6);b+=6}else d=a,0===l&&q(bg);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="MINUTE":(b=c,c=a)}else b=c,c=a;return c}function va(){var c=b;if(h.substr(b,6).toLowerCase()===cg){var d=h.substr(b,6);b+=6}else d=a,0===l&&q(dg);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="SECOND":(b=c,c=a)}else b=
c,c=a;return c}function Db(){var c=b;if(h.substr(b,4).toLowerCase()===eg){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(fg);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="CASE":(b=c,c=a)}else b=c,c=a;return c}function Eb(){var c=b;if(h.substr(b,3).toLowerCase()===gg){var d=h.substr(b,3);b+=3}else d=a,0===l&&q(hg);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="END":(b=c,c=a)}else b=c,c=a;return c}function kd(){var c=b;if(h.substr(b,4).toLowerCase()===ig){var d=h.substr(b,
4);b+=4}else d=a,0===l&&q(jg);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="WHEN":(b=c,c=a)}else b=c,c=a;return c}function ld(){var c=b;if(h.substr(b,4).toLowerCase()===kg){var d=h.substr(b,4);b+=4}else d=a,0===l&&q(lg);if(d!==a){d=b;l++;var e=D();l--;e===a?d=void 0:(b=d,d=a);d!==a?c="THEN":(b=c,c=a)}else b=c,c=a;return c}function gb(){if(44===h.charCodeAt(b)){var c=mg;b++}else c=a,0===l&&q(ng);return c}function V(){if(40===h.charCodeAt(b)){var c=og;b++}else c=a,0===l&&q(pg);return c}
function W(){if(41===h.charCodeAt(b)){var c=qg;b++}else c=a,0===l&&q(rg);return c}function r(){var c;var d=[];for(c=nd();c!==a;)d.push(c),c=nd();return d}function nd(){if(sg.test(h.charAt(b))){var c=h.charAt(b);b++}else c=a,0===l&&q(tg);return c}function jc(c,d,e,n){c={type:"binary-expression",operator:c,left:d,right:e};void 0!==n&&(c.escape=n);return c}function Oa(c,d){for(var e=0;e<d.length;e++)c=jc(d[e][1],c,d[e][3]);return c}k=void 0!==k?k:{};var a={},qd=k.grammarSource,od={start:w},pd=w,rd="!",
fc="\x3d",kc="\x3e\x3d",wd="\x3e",lc="\x3c\x3d",mc="\x3c\x3e",Ad="\x3c",nc="!\x3d",Nb="+",Pb="-",pc="||",Ed="*",Gd="/",$e="@",ed="'",gd="N'",Kb="''",nf=".",Pd="null",Jd="true",Md="false",vf="in",xf="is",zf="like",td="escape",Bf="not",Df="and",Ff="or",Hf="between",Jf="from",ce="for",Yd="substring",Sd="extract",Lf="trim",ie="position",Nf="timestamp",Pf="date",bf="leading",df="trailing",ff="both",oe="cast",se="as",we="integer",ze="smallint",Ce="float",Fe="real",Ie="varchar",hf="to",Rf="interval",Tf=
"year",Vf="month",Xf="day",Zf="hour",ag="minute",cg="second",eg="case",gg="end",ig="when",kg="then",lf="else",mg=",",og="(",qg=")",Yc="`",Ue=/^[A-Za-z_\x80-\uFFFF]/,We=/^[A-Za-z0-9_]/,Ye=/^[A-Za-z0-9_.\x80-\uFFFF]/,id=/^[^']/,tf=/^[0-9]/,pf=/^[eE]/,rf=/^[+\-]/,sg=/^[ \t\n\r]/,$c=/^[^`]/,sd=g("!",!1),gc=g("\x3d",!1),vd=g("\x3e\x3d",!1),xd=g("\x3e",!1),yd=g("\x3c\x3d",!1),zd=g("\x3c\x3e",!1),Bd=g("\x3c",!1),Cd=g("!\x3d",!1),Ob=g("+",!1),Qb=g("-",!1),Dd=g("||",!1),Fd=g("*",!1),Hd=g("/",!1),Ve=x([["A",
"Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Xe=x([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),Ze=x([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),af=g("@",!1),fd=g("'",!1),kf=g("N'",!1),hd=g("''",!1),jd=x(["'"],!0,!1),of=g(".",!1),uf=x([["0","9"]],!1,!1),qf=x(["e","E"],!1,!1),sf=x(["+","-"],!1,!1),Qd=g("NULL",!0),Kd=g("TRUE",!0),Nd=g("FALSE",!0),wf=g("IN",!0),yf=g("IS",!0),Af=g("LIKE",!0),ud=g("ESCAPE",!0),Cf=g("NOT",!0),Ef=g("AND",!0),Gf=g("OR",!0),If=g("BETWEEN",!0),Kf=g("FROM",
!0),de=g("FOR",!0),Zd=g("SUBSTRING",!0),Td=g("EXTRACT",!0),Mf=g("TRIM",!0),je=g("POSITION",!0),Of=g("TIMESTAMP",!0),Qf=g("DATE",!0),cf=g("LEADING",!0),ef=g("TRAILING",!0),gf=g("BOTH",!0),pe=g("CAST",!0),te=g("AS",!0),xe=g("INTEGER",!0),Ae=g("SMALLINT",!0),De=g("FLOAT",!0),Ge=g("REAL",!0),Je=g("VARCHAR",!0),jf=g("TO",!0),Sf=g("INTERVAL",!0),Uf=g("YEAR",!0),Wf=g("MONTH",!0),Yf=g("DAY",!0),$f=g("HOUR",!0),bg=g("MINUTE",!0),dg=g("SECOND",!0),fg=g("CASE",!0),hg=g("END",!0),jg=g("WHEN",!0),lg=g("THEN",
!0),mf=g("ELSE",!0),ng=g(",",!1),pg=g("(",!1),rg=g(")",!1),tg=x([" ","\t","\n","\r"],!1,!1),Zc=g("`",!1),ad=x(["`"],!0,!1),b=0,fb=[{line:1,column:1}],la=0,Lb=[],l=0;if("startRule"in k){if(!(k.startRule in od))throw Error("Can't start parsing from rule \""+k.startRule+'".');pd=od[k.startRule]}var dc=pd();if(dc!==a&&b===h.length)return dc;dc!==a&&b<h.length&&q({type:"end"});throw function(c,d,e){return new K(K.buildMessage(c,d),c,d,e)}(Lb,la<h.length?h.charAt(la):null,la<h.length?v(la,la+1):v(la,la));
}}})})({get exports(){return R},set exports(A){R=A}});let U=function(){function A(){}A.parse=function(K){return R.parse(K)};return A}();t.WhereGrammar=U;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})})}}});
define("exports ../../chunks/_rollupPluginBabelHelpers ../has ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(t,E,R,U,A,K){function I(u,m){u+="";return u.length>=m?u:Array(m-u.length+1).join("0")+u}function h(u,m,f="0",p="0",y="0",B="0",F="",Q="0",X="0"){return"+"===F||"-"===F?(u=`${I(parseInt(u,10),4)}-${I(parseInt(m,10),2)}-${I(parseInt(f,10),2)}`,m="",10>parseFloat(B)&&(m="0"),p=`${I(parseInt(p,10),2)}:${I(parseInt(y,10),2)}:${m+parseFloat(B).toString()}`,F=`${F}${I(parseInt(Q,
10),2)}:${I(parseInt(X,10),2)}`,new Date(u+"T"+p+F)):new Date(parseInt(u,10),parseInt(m,10)-1,parseInt(f,10),parseInt(p,10),parseInt(y,10),parseFloat(B))}function k(u){let m=Ra.exec(u);if(null!==m){const [,f,p,y,B,F,Q]=m;return h(f,p,y,B,F,Q)}m=fa.exec(u);if(null!==m){const [,f,p,y,B,F,Q,X,da,ea]=m;return h(f,p,y,B,F,Q,X,da,ea)}m=ib.exec(u);if(null!==m){const [,f,p,y,B,F,Q,X,da]=m;return h(f,p,y,B,F,"0",Q,X,da)}m=Ta.exec(u);if(null!==m){const [,f,p,y,B,F]=m;return h(f,p,y,B,F)}m=Sa.exec(u);if(null!==
m){const [,f,p,y]=m;return h(f,p,y)}throw Error("SQL Invalid Timestamp");}function g(u){const m=Sa.exec(u);if(null===m)try{return k(u)}catch{throw Error("SQL Invalid Date");}const [,f,p,y]=m;return new Date(parseInt(f,10),parseInt(p,10)-1,parseInt(y,10))}function x(u){return Array.isArray(u)?u:[u]}function N(u){return null!==u?!0!==u:null}function v(u,m){return null!=u&&null!=m?!0===u&&!0===m:!1===u||!1===m?!1:null}function q(u,m){return null!=u&&null!=m?!0===u||!0===m:!0===u||!0===m?!0:null}function w(u,
m){if(null==u)return null;let f=!1;for(const p of m)if(null==p)f=null;else if(u===p){f=!0;break}return f}function J(u,m,f){if(null==u)return null;let p="",y=ha.Normal;for(let B=0;B<m.length;B++){const F=m.charAt(B);switch(y){case ha.Normal:F===f?y=ha.Escaped:p="-[]/{}()*+?.\\^$|".includes(F)?p+("\\"+F):"%"===F?p+".*":"_"===F?p+".":p+F;break;case ha.Escaped:p="-[]/{}()*+?.\\^$|".includes(F)?p+("\\"+F):p+F,y=ha.Normal}}return(new RegExp("^"+p+"$","m")).test(u)}function C(u){return u instanceof Date?
u.valueOf():u}function ka(u,m,f){if(null==m||null==f)return null;m=C(m);f=C(f);switch(u){case "\x3c\x3e":return m!==f;case "\x3d":return m===f;case "\x3e":return m>f;case "\x3c":return m<f;case "\x3e\x3d":return m>=f;case "\x3c\x3d":return m<=f}}function ta(u,m,f){if("||"===u)return A.evaluateFunction("concat",[m,f]);if(m instanceof A.SqlInterval)if(f instanceof Date)switch(u){case "+":return new Date(m.valueInMilliseconds()+f.getTime());case "-":return m.valueInMilliseconds()-f.getTime();case "*":return m.valueInMilliseconds()*
f.getTime();case "/":return m.valueInMilliseconds()/f.getTime()}else if(f instanceof A.SqlInterval)switch(u){case "+":return A.SqlInterval.createFromMilliseconds(m.valueInMilliseconds()+f.valueInMilliseconds());case "-":return A.SqlInterval.createFromMilliseconds(m.valueInMilliseconds()-f.valueInMilliseconds());case "*":return m.valueInMilliseconds()*f.valueInMilliseconds();case "/":return m.valueInMilliseconds()/f.valueInMilliseconds()}else m=m.valueInMilliseconds();else if(f instanceof A.SqlInterval)if(m instanceof
Date)switch(u){case "+":return new Date(f.valueInMilliseconds()+m.getTime());case "-":return new Date(m.getTime()-f.valueInMilliseconds());case "*":return m.getTime()*f.valueInMilliseconds();case "/":return m.getTime()/f.valueInMilliseconds()}else f=f.valueInMilliseconds();else if(m instanceof Date&&"number"===typeof f)switch(f*=864E5,m=m.getTime(),u){case "+":return new Date(m+f);case "-":return new Date(m-f);case "*":return new Date(m*f);case "/":return new Date(m/f)}else if(f instanceof Date&&
"number"===typeof m)switch(m*=864E5,f=f.getTime(),u){case "+":return new Date(m+f);case "-":return new Date(m-f);case "*":return new Date(m*f);case "/":return new Date(m/f)}switch(u){case "+":return m+f;case "-":return m-f;case "*":return m*f;case "/":return m/f}}function Qa(u,m,f,p){u=p.getAttribute(u,m);return null!=u&&1===f[m]?new Date(u):u}const Sa=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,Ra=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)$/,fa=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2}(\.[0-9]+)?)(\+|\-)(\d{1,2}):(\d{1,2})$/,
ib=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})(\+|\-)(\d{1,2}):(\d{1,2})$/,Ta=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/,jb=new Set(["current_timestamp","current_date","current_time"]);let Ua=function(){function u(){}u.makeBool=function(m){return!0===m};u.featureValue=function(m,f,p,y){return Qa(m,f,p,y)};u.equalsNull=function(m){return null===m};u.applyLike=function(m,f,p){return J(m,f,p)};u.ensureArray=function(m){return x(m)};u.applyIn=function(m,f){return w(m,f)};u.currentDate=
function(){const m=new Date;m.setHours(0,0,0,0);return m};u.makeSqlInterval=function(m,f,p){return A.SqlInterval.createFromValueAndQualifer(m,f,p)};u.convertInterval=function(m){return m instanceof A.SqlInterval?m.valueInMilliseconds():m};u.currentTimestamp=function(){return new Date};u.compare=function(m,f,p){return ka(m,f,p)};u.calculate=function(m,f,p){return ta(m,f,p)};u.makeComparable=function(m){return C(m)};u.evaluateFunction=function(m,f){return A.evaluateFunction(m,f)};u.lookup=function(m,
f){m=f[m];return void 0===m?null:m};u.between=function(m,f){return null==m||null==f[0]||null==f[1]?null:m>=f[0]&&m<=f[1]};u.notbetween=function(m,f){return null==m||null==f[0]||null==f[1]?null:m<f[0]||m>f[1]};u.ternaryNot=function(m){return N(m)};u.ternaryAnd=function(m,f){return v(m,f)};u.ternaryOr=function(m,f){return q(m,f)};return u}(),Ab=function(){function u(f,p){this.fieldsIndex=p;this._datefields={};this.parameters={};this._hasDateFunctions=void 0;this.parseTree=K.WhereGrammar.parse(f);const {isStandardized:y,
isAggregate:B,referencedFieldNames:F}=this._extractExpressionInfo(p);this._referencedFieldNames=F;this.isStandardized=y;this.isAggregate=B}u.create=function(f,p){return new u(f,p)};var m=u.prototype;m.testSet=function(f,p=D){const y={};for(const B of this.fieldNames)y[B]=f.map(F=>p.getAttribute(F,B));return!!this._evaluateNode(this.parseTree,{attributes:y},D)};m.calculateValue=function(f,p=D){f=this._evaluateNode(this.parseTree,f,p);return f instanceof A.SqlInterval?f.valueInMilliseconds()/864E5:
f};m.calculateValueCompiled=function(f,p=D){if(null!=this.parseTree._compiledVersion)return this.parseTree._compiledVersion(f,this.parameters,p,this._datefields);if(R("esri-csp-restrictions"))return this.calculateValue(f,p);this._compileMe();return this.parseTree._compiledVersion(f,this.parameters,p,this._datefields)};m.testFeature=function(f,p=D){return!!this._evaluateNode(this.parseTree,f,p)};m.testFeatureCompiled=function(f,p=D){if(null!=this.parseTree._compiledVersion)return!!this.parseTree._compiledVersion(f,
this.parameters,p,this._datefields);if(R("esri-csp-restrictions"))return this.testFeature(f,p);this._compileMe();return!!this.parseTree._compiledVersion(f,this.parameters,p,this._datefields)};m.getFunctions=function(){const f=new Set;this._visitAll(this.parseTree,p=>{"function"===p.type&&f.add(p.name.toLowerCase())});return Array.from(f)};m.getExpressions=function(){const f=new Map;this._visitAll(this.parseTree,p=>{if("function"===p.type){const y=p.name.toLowerCase();p=p.args.value[0];if("column-reference"===
p.type){p=p.column;const B=`${y}-${p}`;f.has(B)||f.set(B,{aggregateType:y,field:p})}}});return[...f.values()]};m.getVariables=function(){const f=new Set;this._visitAll(this.parseTree,p=>{"parameter"===p.type&&f.add(p.value.toLowerCase())});return Array.from(f)};m._compileMe=function(){const f="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=(new Function("feature","lookups","attributeAdapter","datefields",f)).bind(Ua)};m._extractExpressionInfo=
function(f){const p=[],y=new Set;let B=!0,F=!0;this._visitAll(this.parseTree,Q=>{switch(Q.type){case "column-reference":const X=f?.get(Q.column);let da,ea;X?da=ea=X.name??"":(ea=Q.column,da=ea.toLowerCase());X&&X.name&&("date"===X.type||"esriFieldTypeDate"===X.type)&&(this._datefields[X.name]=1);y.has(da)||(y.add(da),p.push(ea));Q.column=ea;break;case "function":const {name:db,args:xa}=Q;Q=xa.value.length;B&&(B=A.isStandardized(db,Q));F&&(F=U.isAggregate(db,Q))}});return{referencedFieldNames:Array.from(p),
isStandardized:B,isAggregate:F}};m._visitAll=function(f,p){if(null!=f)switch(p(f),f.type){case "when-clause":this._visitAll(f.operand,p);this._visitAll(f.value,p);break;case "case-expression":for(const y of f.clauses)this._visitAll(y,p);"simple"===f.format&&this._visitAll(f.operand,p);null!==f.else&&this._visitAll(f.else,p);break;case "expression-list":for(const y of f.value)this._visitAll(y,p);break;case "unary-expression":this._visitAll(f.expr,p);break;case "binary-expression":this._visitAll(f.left,
p);this._visitAll(f.right,p);break;case "function":this._visitAll(f.args,p)}};m.evaluateNodeToJavaScript=function(f){switch(f.type){case "interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(f.value)+", "+JSON.stringify(f.qualifier)+","+JSON.stringify(f.op)+")";case "case-expression":var p="";if("simple"===f.format){var y="this.makeComparable("+this.evaluateNodeToJavaScript(f.operand)+")";p="( ";for(let B=0;B<f.clauses.length;B++)p+=" ("+y+" \x3d\x3d\x3d this.makeComparable("+this.evaluateNodeToJavaScript(f.clauses[B].operand)+
")) ? ("+this.evaluateNodeToJavaScript(f.clauses[B].value)+") : "}else for(p="( ",y=0;y<f.clauses.length;y++)p+=" this.makeBool("+this.evaluateNodeToJavaScript(f.clauses[y].operand)+")\x3d\x3d\x3dtrue ? ("+this.evaluateNodeToJavaScript(f.clauses[y].value)+") : ";p=null!==f.else?p+this.evaluateNodeToJavaScript(f.else):p+"null";return p+" )";case "parameter":return"this.lookup("+JSON.stringify(f.value.toLowerCase())+",lookups)";case "expression-list":p="[";for(y of f.value)"["!==p&&(p+=","),p+=this.evaluateNodeToJavaScript(y);
return p+"]";case "unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(f.expr)+")";case "binary-expression":switch(f.operator){case "AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+" )";case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+
")";case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(f.left)+")))";case "IN":return"this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+"))";case "NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(f.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(f.right)+")))";case "BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(f.left)+
","+this.evaluateNodeToJavaScript(f.right)+")";case "NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+")";case "NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+","+JSON.stringify(f.escape)+"))";case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return"this.compare("+
JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")";case "*":case "-":case "+":case "/":case "||":return"this.calculate("+JSON.stringify(f.operator)+","+this.evaluateNodeToJavaScript(f.left)+","+this.evaluateNodeToJavaScript(f.right)+")"}throw Error("Not Supported Operator "+f.operator);case "null":case "boolean":case "string":case "number":return JSON.stringify(f.value);case "date":return"(new Date("+g(f.value).getTime().toString()+
"))";case "timestamp":return"(new Date("+k(f.value).getTime().toString()+"))";case "current-time":return"date"===f.mode?"this.currentDate()":"this.currentTimestamp()";case "column-reference":return"this.featureValue(feature,"+JSON.stringify(f.column)+",datefields,attributeAdapter)";case "function":return"this.evaluateFunction("+JSON.stringify(f.name)+","+this.evaluateNodeToJavaScript(f.args)+")"}throw Error("Unsupported sql syntax "+f.type);};m._evaluateNode=function(f,p,y){switch(f.type){case "interval":return p=
this._evaluateNode(f.value,p,y),A.SqlInterval.createFromValueAndQualifer(p,f.qualifier,f.op);case "case-expression":if("simple"===f.format){var B=C(this._evaluateNode(f.operand,p,y));for(var F=0;F<f.clauses.length;F++)if(B===C(this._evaluateNode(f.clauses[F].operand,p,y)))return this._evaluateNode(f.clauses[F].value,p,y)}else for(B=0;B<f.clauses.length;B++)if(!0===this._evaluateNode(f.clauses[B].operand,p,y))return this._evaluateNode(f.clauses[B].value,p,y);return null!==f.else?this._evaluateNode(f.else,
p,y):null;case "parameter":return this.parameters[f.value.toLowerCase()];case "expression-list":B=[];for(F of f.value)B.push(this._evaluateNode(F,p,y));return B;case "unary-expression":return N(this._evaluateNode(f.expr,p,y));case "binary-expression":switch(f.operator){case "AND":return v(this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y));case "OR":return q(this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y));case "IS":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");
return null===this._evaluateNode(f.left,p,y);case "ISNOT":if("null"!==f.right.type)throw Error("Unsupported RHS for IS");return null!==this._evaluateNode(f.left,p,y);case "IN":return B=x(this._evaluateNode(f.right,p,y)),w(this._evaluateNode(f.left,p,y),B);case "NOT IN":return B=x(this._evaluateNode(f.right,p,y)),N(w(this._evaluateNode(f.left,p,y),B));case "BETWEEN":return B=this._evaluateNode(f.left,p,y),f=this._evaluateNode(f.right,p,y),null==B||null==f[0]||null==f[1]?null:B>=C(f[0])&&B<=C(f[1]);
case "NOTBETWEEN":return B=this._evaluateNode(f.left,p,y),f=this._evaluateNode(f.right,p,y),null==B||null==f[0]||null==f[1]?null:B<C(f[0])||B>C(f[1]);case "LIKE":return J(this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y),f.escape);case "NOT LIKE":return N(J(this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y),f.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return ka(f.operator,this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,
p,y));case "-":case "+":case "*":case "/":case "||":return ta(f.operator,this._evaluateNode(f.left,p,y),this._evaluateNode(f.right,p,y))}case "null":case "boolean":case "string":case "number":return f.value;case "date":return g(f.value);case "timestamp":return k(f.value);case "current-time":return p=new Date,"date"===f.mode&&p.setHours(0,0,0,0),p;case "column-reference":return Qa(p,f.column,this._datefields,y);case "data-type":return f.value;case "function":return p=this._evaluateNode(f.args,p,y),
this.isAggregate?U.aggregateFunction(f.name,p):A.evaluateFunction(f.name,p)}throw Error("Unsupported sql syntax "+f.type);};E._createClass(u,[{key:"fieldNames",get:function(){return this._referencedFieldNames}},{key:"hasDateFunctions",get:function(){if(null!=this._hasDateFunctions)return this._hasDateFunctions;this._hasDateFunctions=!1;this._visitAll(this.parseTree,f=>{"current-time"===f.type?this._hasDateFunctions=!0:"function"===f.type&&(this._hasDateFunctions=this._hasDateFunctions||jb.has(f.name.toLowerCase()))});
return this._hasDateFunctions}}]);return u}();var ha;(function(u){u[u.Normal=0]="Normal";u[u.Escaped=1]="Escaped"})(ha||(ha={}));const D={getAttribute(u,m){return(u&&"object"===typeof u.attributes?u.attributes:u)[m]}};t.WhereClause=Ab;t.defaultAttributeAdapter=D;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});